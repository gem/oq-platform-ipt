The OpenQuake volcano calculator can be used for the calculation of damage distribution statistics or individual asset and portfolio loss statistics for a portfolio of buildings starting from hazard footprints.<br/>

Four hazard perils can be considered: Ash fall, Lahars, Lava flow, and Pyroclastic flow.<br/><br/>

<div name="phens" class="alert alert-info" role="alert">Choose at least one volcano phenomena.
  <div class="menuItems" style="text-align: center;">
    <form style="margin: 0px;">
      <div class="chbox">
        <input style="margin:0;" type="checkbox" name="ashfall">
        <span class="inlible">Ash fall</span>
      </div>
      <div class="chbox">
        <input style="margin:0;" type="checkbox" name="lavaflow">
        <span class="inlible">Lava flow</span>
      </div>
      <div class="chbox">
        <input style="margin:0;" type="checkbox" name="lahar">
        <span class="inlible">Lahar</span>
      </div>
      <div class="chbox chbox_last">
        <input style="margin:0;" type="checkbox" name="pyroclasticflow">
        <span class="inlible">Pyroclastic flow</span>
      </div>
    </form>
  </div>
</div>

<div>
  <div class="menuItems">
    <label>Description:</label>
    <textarea id="description" rows="4" cols="10" name="description" class="gem-gen-descr">Volcano scenario calculation</textarea>
  </div>
</div>

<div style="display: none;" name="ashfall-input">
  <h3>Ash fall</h3>
  <div class="menuItems">
    <label>Type of input:</label>
    <select name="in-type">
      <option value="openquake">OpenQuake</option>
      <option value="text">Text file</option>
      <option value="shape" disabled="disabled">Shape file</option>
    </select>
  </div>
  <div class="menuItems" name="epsg">
    <label>Coordinate reference system [EPSG]:</label>
    <input type="text" name="epsg" placeholder="4326 (WGS84)" oninput="this.value = this.value.replace(/[^0-9]/, '')"/>
  </div>
  
  <div class="menuItems" name="ashfall-file-html">
    <label>Model file <a target="_blank" href="#" onclick="gem_ipt.help_msg('Hello <b>pippo</b>.<br/><br/>pippo<br/><br/>pippo<br/><br/>pippo<br/><br/>pippo'); return false;"><span class="ui-icon ui-icon-help ipt_help" title='Earthquake ash fall model file describing the scenario event.'></span></a>
      :</label>
    {{ ashfall_file_html.file_html }}
    {{ ashfall_file_html.new_btn }}
  </div>
  <div class="menuItems" name="ashfall-file-new" style="display: none;">
    <div name="msg"><br></div>
    {% if gem_qgis == None %}
    <form action="upload/ashfall_file" method="post" id="file-upload-form" name="ashfall-file"
          enctype="multipart/form-data">
      {% csrf_token %}
      {{ ashfall_file_upload.file_upload }}
    </form>
    {% endif %}
  </div>

  <div class="menuItems">
    <label>Humidity amplification factor:</label><input type="text" name="hum-ampl" value="1.6"/>
  </div>
</div>

<div style="display: none;" name="lavaflow-input">
  <h3>Lava Flow</h3>
  <div class="menuItems">
    <label>Type of input:</label>
    <select name="in-type">
      <option value="openquake">OpenQuake</option>
      <option value="text">Text file</option>
      <option value="shape" disabled="disabled">Shape file</option>
    </select>
  </div>
  <div class="menuItems" name="epsg">
    <label>Coordinate reference system [EPSG]:</label>
    <input type="text" name="epsg" placeholder="4326 (WGS84)" oninput="this.value = this.value.replace(/[^0-9]/, '')"/>
  </div>
  <div class="menuItems" name="lavaflow-file-html">
    <label>Model file <span class="ui-icon ui-icon-help ipt_help" title='Earthquake lavaflow model file describing the scenario event.'></span>
      :</label>
    {{ lavaflow_file_html.file_html }}
    {{ lavaflow_file_html.new_btn }}
  </div>
  <div class="menuItems" name="lavaflow-file-new" style="display: none;">
    <div name="msg"><br></div>
    {% if gem_qgis == None %}
    <form action="upload/lavaflow_file" method="post" id="file-upload-form" name="lavaflow-file"
          enctype="multipart/form-data">
      {% csrf_token %}
      {{ lavaflow_file_upload.file_upload }}
    </form>
    {% endif %}
  </div>
</div>

<div style="display: none;" name="lahar-input">
  <h3>Lahar</h3>
  <div class="menuItems">
    <label>Type of input:</label>
    <select name="in-type">
      <option value="openquake">OpenQuake</option>
      <option value="text">Text file</option>
      <option value="shape" disabled="disabled">Shape file</option>
    </select>
  </div>
  <div class="menuItems" name="epsg">
    <label>Coordinate reference system [EPSG]:</label>
    <input type="text" name="epsg" placeholder="4326 (WGS84)" oninput="this.value = this.value.replace(/[^0-9]/, '')"/>
  </div>
  <div class="menuItems" name="lahar-file-html">
    <label>Model file <span class="ui-icon ui-icon-help ipt_help" title='Earthquake lahar model file describing the scenario event.'></span>
      :</label>
    {{ lahar_file_html.file_html }}
    {{ lahar_file_html.new_btn }}
  </div>
  <div class="menuItems" name="lahar-file-new" style="display: none;">
    <div name="msg"><br></div>
    {% if gem_qgis == None %}
    <form action="upload/lahar_file" method="post" id="file-upload-form" name="lahar-file"
          enctype="multipart/form-data">
      {% csrf_token %}
      {{ lahar_file_upload.file_upload }}
    </form>
    {% endif %}
  </div>
</div>

<div style="display: none;" name="pyroclasticflow-input">
  <h3>Pyroclastic flow</h3>
  <div class="menuItems">
    <label>Type of input:</label>
    <select name="in-type">
      <option value="openquake">OpenQuake</option>
      <option value="text">Text file</option>
      <option value="shape" disabled="disabled">Shape file</option>
    </select>
  </div>
  <div class="menuItems" name="epsg">
    <label>Coordinate reference system [EPSG]:</label>
    <input type="text" name="epsg" placeholder="4326 (WGS84)" oninput="this.value = this.value.replace(/[^0-9]/, '')"/>
  </div>
  <div class="menuItems" name="pyroclasticflow-file-html">
    <label>Model file <span class="ui-icon ui-icon-help ipt_help" title='Earthquake pyroclasticflow model file describing the scenario event.'></span>
      :</label>
    {{ pyroclasticflow_file_html.file_html }}
    {{ pyroclasticflow_file_html.new_btn }}
  </div>
  <div class="menuItems" name="pyroclasticflow-file-new" style="display: none;">
    <div name="msg"><br></div>
    {% if gem_qgis == None %}
    <form action="upload/pyroclasticflow_file" method="post" id="file-upload-form" name="pyroclasticflow-file"
          enctype="multipart/form-data">
      {% csrf_token %}
      {{ pyroclasticflow_file_upload.file_upload }}
    </form>
    {% endif %}
  </div>
</div>

{% include "ipt/tabs/cf/sect_exposure_model.html" %}

<div name="fragility" style="display: none;">
  <h3>Fragility model</h3>
  <div class="menuItems" name="fm-ashfall-file-html" data-gem-group="fragility-model">
    <label>Ash fall structural fragility model <span class="ui-icon ui-icon-help ipt_help" title='FIXME'></span>
      :</label>
    {{ fm_ashfall_file_html.file_html }}
    {{ fm_ashfall_file_html.new_btn }}
  </div>
  <div class="menuItems" name="fm-ashfall-file-new" style="display: none;">
    <div name="msg"><br></div>
    {% if gem_qgis == None %}
    <form action="upload/fragility_model" method="post" id="file-upload-form" name="fm-ashfall-file"
          enctype="multipart/form-data">
      {% csrf_token %}
      {{ fm_ashfall_file_upload.file_upload }}
    </form>
    {% endif %}
  </div>

  <div class="alert alert-info" role="alert">
    <div class="menuItems" style="text-align: center;">
      <form style="margin: 0px;">
        <div class="chbox chbox_last">
          <input style="margin:0;" type="checkbox" name="is-cons-models">
          <span class="inlible">Include consequence models</span>
        </div>
      </form>
    </div>
  </div>

  <div name="ashfall-cons" style="display: none;">
    <div class="menuItems" name="fm-ashfall-cons-html" data-gem-group="fragility-cons">
      <label>Ash fall consequence model <span class="ui-icon ui-icon-help ipt_help" title='FIXME'></span>:</label>
      {{ fm_ashfall_cons_html.file_html }}
      {{ fm_ashfall_cons_html.new_btn }}
    </div>
    <div class="menuItems" name="fm-ashfall-cons-new" style="display: none;">
      <div name="msg"><br></div>
      {% if gem_qgis == None %}
      <form action="upload/fragility_cons" method="post" id="file-upload-form" name="fm-ashfall-cons"
            enctype="multipart/form-data">
        {% csrf_token %}
        {{ fm_ashfall_cons_upload.file_upload }}
      </form>
      {% endif %}
    </div>
  </div>
</div>

<div style="text-align: center;">
  <hr>
  <button type="submit" style="vertical-align: top; margin: auto;" class="btn btn-primary" name="clean_all">Clean all</button>

  <button type="submit" style="vertical-align: top; margin: auto;" class="btn btn-primary" name="download">{%if gem_qgis != None %}'Save As'{% else %}Download{% endif %} Zip File</button>
  {%if gem_qgis != None %}
  <button name="run-calc-btn" type="button" style="vertical-align: top; margin: auto;" class="btn btn-primary">Run Calculation</button>
  {% endif %}
  <form style="display: inline-block;" name="downloadForm" method="post">{% csrf_token %}</form>
</div>
